<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Client Filing Insights</title>
    <link rel="icon" type="image/ico" href="{{ url_for('static', filename='favicon.ico') }}">
    <link rel="icon" href="{{ url_for('static', filename='favicon-32x32.png') }}" sizes="32x32" type="image/png">
    <link rel="icon" href="{{ url_for('static', filename='favicon-16x16.png') }}" sizes="16x16" type="image/png">
    <link rel="apple-touch-icon" href="{{ url_for('static', filename='apple-touch-icon.png') }}" sizes="180x180">

    


    <!-- Add Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Ubuntu:ital,wght@0,300;0,400;0,500;0,700;1,300;1,400;1,500;1,700&display=swap" rel="stylesheet">

    <style>
        /* General Styling */
        body {
            background-color: #faf3e9;
            color: rgb(22, 22, 22);
            font-family: "Ubuntu", serif;
            font-weight: 400;
            font-style: normal;
        }
    
        .customData {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 15px;
        }
    
        label, button {
            margin-right: 10px;
            margin-left: 10px;
        }
    
        h5{
            text-align: center;
        }
    
        select, input, label {
            padding: 5px;
            border-radius: 5px;
        }
    
        button {
            color: #faf3e9;
            background-color: #29629b;
            border: 1px solid #f8f9fa;
            border-radius: 5px;
            padding: 5px 10px;
            cursor: pointer;
            width: 10%;
        }
    
        button:hover {
            background-color: #043769;
        }
    
        p {
            margin-top: 10px;
        }
    
        th {
            text-align: center;
        }
    
        /* Custom file upload button */
        input[type="file"] {
            display: none;
        }
    
        .custom-file-upload {
            border: 1px solid #ccc;
            background-color: #f8f8f8;
            padding: 10px 20px;
            display: inline-block;
            cursor: pointer;
            font-size: 14px;
            border-radius: 4px;
            transition: background-color 0.3s;
        }
    
        .custom-file-upload:hover {
            background-color: #e2e2e2;
        }
    
        #file-name {
            margin-left: 10px;
            font-size: 14px;
            color: #333;
            padding-top: 10px;
        }
    
        /* Centered table */
        .table-responsive {
            margin-bottom: 20px;
        }
    
        .center-header th {
            text-align: center;
        }

        /* Container for centering content horizontally */
        .header-container {
            display: flex;
            justify-content: center; /* Center content horizontally */
            align-items: center; /* Vertically center within the container */
            flex-direction: column; /* Stack the logo and h1 vertically */
            margin: 10px 0; /* Add some space around the container */
        }

        /* Styling for h1 */
        h1 {
            color: whitesmoke;
            background-color: #3c3c3c;
            border-radius: 5px;
            padding: 5px;
            display: inline-block;
            width: auto;
            text-align: center; /* Center text inside the h1 */
            margin-top: 10px; /* Optional: Add some space between the logo and the text */
        }

        /* Media Queries for smaller devices */
        @media (max-width: 1200px) {
            .customData {
                flex-direction: row;
                align-items: center;
            }
    
            button {
                width: 40%; /* Make button size smaller for medium screens */
            }
    
            .col-md-4 {
                flex: 0 0 100%;
                max-width: 100%;
                margin-bottom: 20px;
            }
    
            .table-responsive {
                max-height: none;
            }
        }
    
        /* For tablets (max-width: 768px) */
        @media (max-width: 768px) {
            h1 {
                font-size: 1.5rem; /* Smaller title on tablets */
            }
    
            .container {
                padding: 10px;
            }
    
            label, select, input, button {
                width: 60%;
            }
            
            label, select{
                margin: 0;
            }
            .customData {
                flex-direction: row;
                align-items: center;
            }
    
            .custom-file-upload {
                padding: 8px 16px;
            }
    
            #file-name {
                font-size: 13px;
                margin: 0;
                padding: 0;
            }
    
            .col-md-4 {
                flex: 0 0 100%;
                max-width: 100%;
                margin-bottom: 10px;
            }
    
            /* Reduce the padding and font size in tables */
            .table-responsive {
                margin-bottom: 5px;
            }
    
            h5 {
                font-size: 1.2rem;
            }
    
            .row.customData {
                margin-top: 5px;
            }
        }
    
        /* For mobile devices (max-width: 576px) */
        @media (max-width: 576px) {
            h1 {
                font-size: 1.25rem; /* Smaller title for mobile */
            }
    
            button {
                width: 80%;
                padding: 10px;
            }
    
            label, select, input {
                font-size: 12px;
                padding: 6px;
            }
    
            .customData {
                padding: 10px;
                flex-direction: column;
            }
    
            .col-md-4 {
                flex: 0 0 100%;
                max-width: 100%;
                margin-bottom: 20px;
            }
    
            .table-responsive {
                padding: 10px;
                max-width: 100%;
                overflow-x: auto;
            }
    
            .custom-file-upload {
                padding: 8px 16px;
            }
    
            #file-name {
                font-size: 12px;
            }
    
            p {
                font-size: 14px;
                text-align: center;
            }
    
            /* For the tables: Make the font size a little smaller */
            th, td {
                font-size: 14px;
            }
        }
    
        /* Extra small screens (max-width: 480px) */
        @media (max-width: 480px) {
            h1 {
                font-size: 1.2rem; /* Very small font size for mobile screens */
            }
    
            .container {
                padding: 5px;
            }
    
            button {
                padding: 8px;
            }
    
            label, select, input {
                font-size: 11px;
                padding: 5px;
            }
    
            .table-responsive {
                padding: 5px;
            }
    
            h5 {
                font-size: 1rem;
            }
    
            .custom-file-upload {
                font-size: 12px;
                padding: 8px 12px;
            }
    
            #file-name {
                font-size: 11px;
            }
    
            p {
                font-size: 12px;
            }
    
            /* Smallest tables - make text even smaller */
            th, td {
                font-size: 12px;
            }
        }
    
    </style>
    
        
</head>
<body>
    <div class="container mt-2">
        
        <div class="header-container">
            <h1>Client Filing Insights - WSD</h1>
        </div>
        
        
        <form method="POST" class="customData" enctype="multipart/form-data">
            <!-- File Input -->
            
                <label for="file-input" class="custom-file-upload">Choose a File</label>
                <input type="file" id="file-input" id="file-input" name="files" onchange="updateFileNames()" multiple required>
                <span id="file-name"></span>
           


            <!-- Client Dropdown -->
            <label for="client">Client: </label>
            <select name="client">
                <option value="All">All</option>
                <option value="Barclays">Barclays</option>
                <option value="Bank of America Corp.">Bank of America Corp.</option>
                <option value="Citi Group">Citi Group</option>
                <option value="BofA">BofA</option>
                <option value="Other">Other</option>
            </select>
        
            <!-- Year Dropdown -->
            <label for="year">Year: </label>
            <select name="year">
                <option value="All">All</option>
                <option value="2022">2022</option>
                <option value="2023">2023</option>
                <option value="2024">2024</option>
                <option value="2025">2025</option>
                <option value="2026">2026</option>
            </select>
        
            <!-- Month Dropdown -->
            <label for="month">Month: </label>
            <select name="month">
                <option value="All">All</option>
                <option value="January">January</option>
                <option value="February">February</option>
                <option value="March">March</option>
                <option value="April">April</option>
                <option value="May">May</option>
                <option value="June">June</option>
                <option value="July">July</option>
                <option value="August">August</option>
                <option value="September">September</option>
                <option value="October">October</option>
                <option value="November">November</option>
                <option value="December">December</option>
            </select>
        
            <!-- Submit Button -->
            <button type="submit">Filter</button>
        </form>

        <!-- Dsiplay filter options -->
        <p class="text-center">Filtered for =>
            Client: <strong>{{ selected_filters.client }}</strong>, 
            Year: <strong>{{ selected_filters.year }}</strong>, 
            Month: <strong>{{ selected_filters.month }}</strong>
        </p>

        <!-- Display Total Filings -->
        
        <h3 class="mt-4 text-center">Total Filings: 
            {% if total_filings > 0 %}
            {{ total_filings }}
            {% endif %}
        </h3>

        <div class="row customData">
            <div class="col-md-4">
                <!-- Show Top 10 Filing Days -->
                <h5 class="mt-4">Peak Filing Days</h5>
                
                <div class="table-responsive text-center">
                    {{ top_days|safe }}
                </div>
            </div>
            <div class="col-md-4">
                <!-- Show Lowest 10 Filing Days -->
                <h5 class="mt-4">Quiet Filing Days</h5>
                <div class="table-responsive ">
                
                <div class="table-responsive text-center center-header">
                    {{ lowest_days|safe }}
                </div>
            </div>
        </div>
        

        
    </div>

    <!-- Add Bootstrap JS Bundle -->
    <script 
        src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js" 
        integrity="sha384-ENjdO4Dr2bkBIFxQpeoP4l2kuTWnrNxQ9bKpCchvjLTK2EipGYeGck5GoLdELT3N" 
        crossorigin="anonymous"></script>
        <script>
            function updateFileNames() {
                var input = document.getElementById('file-input');
                var fileList = input.files;
                var fileNames = fileList.length > 0 ? Array.from(fileList).map(file => file.name).join(', ') : 'No files chosen';
                document.getElementById('file-name').textContent = fileNames;
            }
            </script>
            
</body>
</html>
